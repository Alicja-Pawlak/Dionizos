{% extends "base.html" %}
{% load static %}
{% load thumbnail %}
{% block content %}
<button class="navbar-toggler d-sm-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId"
  aria-controls="collapsibleNavId" aria-expanded="false" aria-label="Toggle navigation">

  <span class="navbar-toggler-icon"></span>

</button>
</nav>
<span class="col-3 offset-9  marginlog mt-sm-2 fixed-top d-flex justify-content-end text-light">
  {% if user.is_authenticated %}
  <div class="d-flex align-items-center">
    <span class="btn bg-wlasne py-1 text-light">
  {{ user.username }}
</span>
</div>
  <a href="{% url 'logout' %}">
    <button class="btn nav-color text-light py-1 guzik shadowlog">
      <i class="d-none d-lg-inline fas fa-sign-out"></i> Wyloguj
    </button>
  </a>
  {% else %}
  <div class="col-12 pr-0 d-flex justify-content-end">
    <div >
      <a href="{% url 'login' %}">
        <button class="btn nav-color text-light mr-1 py-1 guzik shadowlog">
          <i class="d-none d-xl-inline fas fa-sign-in"></i> Zaloguj
        </button>
      </a>
    </div>
    <div >
      <a href="{% url 'signup' %}">
        <button class="btn nav-color text-light py-1 guzik shadowlog">
        <i class="d-none d-xl-inline fas fa-sign-out"></i> Zarejestruj
      </button>
      </a>
    </div>
  </div>
  {% endif %}
</span>
</header>
<main class="container px-4 margin100 mb-5 shadow-lg bg-light border">
  <article>
    <div>
      <div class="bg-dark mt-5 fixed-top shadow">
        <nav class=" py-0 position-fixed marginindexlog col-12 navbar navbar-expand-sm bg-wlasne navbar-dark">
          <div class="collapse navbar-collapse" id="collapsibleNavId">
            <ul class="navbar-nav mt-2 mt-lg-0 mx-auto">
              <li class="nav-item dropdown px-5">
                <a class="nav-link dropdown-toggle" href="#" id="dropdownId" data-toggle="dropdown" aria-haspopup="true"
                  aria-expanded="false">Kolor</a>
                  <!-- tutaj będzie trzeba zrobić przeszukiwanie po kolorach -->
                <div class="dropdown-menu text-center" aria-labelledby="dropdownId">
                  <a class="dropdown-item" href="#">Czerwone</a>
                  <a class="dropdown-item" href="#">Białe</a>
                  <a class="dropdown-item" href="#">Różowe</a>
                </div>
              </li>
              <li class="nav-item dropdown px-5">
                <a class="nav-link dropdown-toggle" href="#" id="dropdownId" data-toggle="dropdown" aria-haspopup="true"
                  aria-expanded="false">Smak</a>
                  <!-- tutaj będzie trzeba zrobić przeszukiwanie po smakach-->
                <div class="dropdown-menu text-center" aria-labelledby="dropdownId">
                  <a class="dropdown-item" href="#">Słodkie</a>
                  <a class="dropdown-item" href="#">Półsłodkie</a>
                  <a class="dropdown-item" href="#">Wytrawne</a>
                  <a class="dropdown-item" href="#">Półwytrawne</a>
                </div>
              </li>
              <li class="nav-item dropdown px-5">
                <a class="nav-link dropdown-toggle" href="#" id="dropdownId" data-toggle="dropdown" aria-haspopup="true"
                  aria-expanded="false">Cena</a>
                  <!-- tutaj będzie trzeba zrobić przeszukiwanie po cenie -->
                <div class="dropdown-menu text-center" aria-labelledby="dropdownId">
                  <a class="dropdown-item" href="#">Do 20 zł</a>
                  <a class="dropdown-item" href="#">20 zł - 49 zł</a>
                  <a class="dropdown-item" href="#">50 zł - 99 zł</a>
                </div>
              </li>
            </ul>

          </div>
        </nav>
      </div>
      <div class="col-12 mt-4 pt-3">
        <header>
          <h5 class="text-center titles"><b>Wina z każdej półki!</b></h5>
          <!-- tutaj będzie trzeba dać jakiś sensowny opis -->
          <div class="mt-3 pb-5 border-bottom"> 
            Przedstawiamy Państwu ofertę win z całego świata. Na naszej stronie nie ogranicza
            nas żadna cena, kolor czy smak wina.
            Wybieramy na podstawie własnego węchu i smaku, wszystkie inne czynniki nie mają tu znaczenia!
            Bla bla bla test... hahahahahahahah hihihihihhihihih hehehehhehehehehhe.
            Cos tam cos tam sprawdzam jak wyglada padding. Jeszcze wiecej muse napisac, jezu.
          </div>
        </header>
        
      </div>
    </div>
  </article>
  <section>
    <div class="container">

      <!-- tutaj trzeba naprawić przeszukiwanie
      dobrze przeszukuje jedynie po nazwie,
      zamiast półsłodkie trzeba wpisywać 'se',
      zamiast czerwone 'r' itp. -->
      <div class="col-12 d-flex justify-content-end">
        <div class="row mt-5">
      
        
      <form class="= d-flex flex-row-reverse px-0" action="." method="POST">
        <button class="btn bg-black text-light guzik"><i class="fas fa-search px-2 py-1" aria-hidden="true"></i></button>
        {% csrf_token %}
        {{ form }}

      </form>
      <!-- Button z plusem i winem -->
      <div class="d-flex pl-1">
      <a href="{% url 'dodaj' %}" >
        <button class="btn bg-black text-light guzik" title="Dodaj produkt">
          <i class="fas fa-plus "></i> <i class="fas fa-wine-bottle fa-lg" ></i>
        </button>
      </a>
    </div>
      </div>
    </div>
      <!-- koniec buttona -->
      <div class="row mt-5">
        {% for wine in wines %}
        <div class="col-md-6 col-lg-3 mb-4">
          <div class="card-group">
            <div class="card border-light shadow p-3 rounded mb-5">
              {% if wine.image %}
              <a href="{% url 'produkt' wine.id %}">
                {% thumbnail wine.image "200x400" crop="center" quality=150 as image %}
              <img class="card-img-top" src="{{ image.url }}"  />
              {% endthumbnail %}
            </a>
            {% endif %}
              
              <!-- aktualnie trzeba podawać ścieżkę do zdjęcia w bazie -->
              <div class="card-body text-center">
                
                <!-- funkcje z podłogą zwracają te dobre nazwy 
                  (czerwone, a nie 'r', półsłodkie, a nie 'se') -->
            
                <h5 class="card-title pt-4">{{ wine.name }}</h5>
                <h6 class="card-title m-0">{{ wine.color_name }}</h6>
                <h6 class="card-title ">{{ wine.taste_name }}</h6>
                <h6 class="card-title ">{{ wine.price }} zł</h6>

                <!-- tutaj będzie trzeba zrobić przekierowanie
                do strony danego produktu   aktualnie url = /produkt/1) -->
                <a href="{% url 'produkt' wine.id %}">
                  <button type="button" class="guzik btn bg-black text-light btn-sm px-4">
                    Wybierz
                  </button>
                </a>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>


  </section>


</main>
{% endblock %}